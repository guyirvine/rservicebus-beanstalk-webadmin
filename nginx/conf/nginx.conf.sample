daemon off;

worker_processes  1;

events {
	worker_connections  1024;
}

http {
	include	   mime.types;
	default_type  application/octet-stream;
	gzip  on;
	gzip_vary on;
	expires -1;

	sendfile		on;

	keepalive_timeout  65;

	# this can be any application server, not just Unicorn/Rainbows!
	upstream app_server {
		# fail_timeout=0 means we always retry an upstream even if it failed
		# to return a good HTTP response (in case the Unicorn master nukes a
		# single worker for timing out).

		# for UNIX domain socket setups:
		server unix:/tmp/.beanstalk-web-admin fail_timeout=0;

	}

	server {
		listen	   2008;
		server_name  localhost;
		root   /Users/girvine/Ruby/rservicebus-beanstalk-webadmin/html;
		charset	UTF-8;

		location / {
			index  index.html index.htm;
			default_type text/html;
		}

		location /tube {
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header Host $http_host;
			proxy_redirect off;

			proxy_pass http://app_server;
		}

		# redirect server error pages to the static page /50x.html
		#
		error_page   500 502 503 504  /50x.html;
		location = /50x.html {
			root   html;
		}

	}

}
